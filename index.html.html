<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Factrick - Usuarios</title>
<style>
body { 
  margin:0; 
  font-family:Arial; 
  background:linear-gradient(135deg,#1c1c1c,#3d0066); 
  color:white; 
  display:flex; 
  justify-content:center; 
  align-items:center; 
  height:100vh; 
}
.box { 
  background: rgba(0,0,0,0.8); 
  padding:30px; 
  border-radius:15px; 
  box-shadow:0 0 20px rgba(255,0,255,0.4); 
  text-align:center; 
  width:350px; 
  display:none; 
}
.box.active { display:block; }
input, select, button { 
  margin:10px 0; 
  padding:10px; 
  border-radius:8px; 
  border:none; 
  width:90%; 
}
button { 
  background:#a200ff; 
  color:white; 
  cursor:pointer; 
  font-weight:bold; 
}
button:hover { background:#6d00aa; }
.topbar { 
  position:absolute; 
  top:10px; 
  right:10px; 
  background:#111; 
  padding:10px 20px; 
  border-radius:10px; 
  font-size:14px; 
  box-shadow:0 0 10px rgba(255,255,255,0.3); 
}
.result { margin-top:15px; font-weight:bold; color:#0f0; }
.section { margin-top:20px; background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; }
a { color:#aaa; text-decoration:none; cursor:pointer; }
a:hover { color:#fff; }
.contact-icons svg { 
  margin:0 5px; 
  vertical-align:middle; 
  transition: transform 0.2s; 
}
.contact-icons svg:hover { transform: scale(1.2); }
</style>
</head>
<body>

<!-- LOGIN -->
<div class="box active" id="loginBox">
  <h2>Acceso</h2>
  <input type="text" id="userLogin" placeholder="Usuario">
  <input type="password" id="passLogin" placeholder="Contrase√±a">
  <button onclick="loginUser()">Entrar</button>
  <p id="loginError" style="color:red;display:none;">Credenciales incorrectas</p>
  <p><a onclick="showRegister()">Registrarse</a></p>

  <!-- Bot√≥n Admin integrado -->
  <button onclick="window.location.href='admin.html'" 
          style="background:#f500ff; margin-top:10px; font-weight:bold;">
    üîë Acceso Admin
  </button>
</div>

<!-- REGISTER -->
<div class="box" id="registerBox">
  <h2>Registro</h2>
  <input type="text" id="userReg" placeholder="Usuario">
  <input type="password" id="passReg" placeholder="Contrase√±a">
  <button onclick="registerUser()">Registrar</button>
  <p><a onclick="showLogin()">Volver a Login</a></p>
</div>

<!-- PANEL USUARIO -->
<div class="box" id="panelBox">
  <div class="topbar" id="topbar"></div>
  <h2>Factrick Revendedor</h2>

  <div class="section">
    <h3>Generar Key</h3>
    <select id="producto">
      <option value="drip">Drip Client</option>
      <option value="hg">HG CHEAT</option>
    </select>
    <select id="tiempo">
      <option value="1">1 D√≠a - $1</option>
      <option value="7">7 D√≠as - $5</option>
      <option value="15">15 D√≠as - $12</option>
      <option value="30">1 Mes - $25</option>
      <option value="365">1 A√±o - $50</option>
    </select>
    <button onclick="generarKey()">Generar</button>
    <div class="result" id="resultado"></div>

    <!-- Contacto -->
    <div class="contact-icons" style="margin-top:15px;">
      <!-- WhatsApp -->
      <a href="https://wa.me/573180023199" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 48 48">
          <path fill="#fff" d="M4.9,43.3l2.7-9.8C5.9,30.6,5,27.3,5,24C5,13.5,13.5,5,24,5c5.1,0,9.8,2,13.4,5.6
          C41,14.2,43,18.9,43,24c0,10.5-8.5,19-19,19c0,0,0,0,0,0h0c-3.2,0-6.3-0.8-9.1-2.3L4.9,43.3z"></path>
          <path fill="#fff" d="M4.9,43.8c-0.1,0-0.3-0.1-0.4-0.1c-0.1-0.1-0.2-0.3-0.1-0.5L7,33.5c-1.6-2.9-2.5-6.2-2.5-9.6
          C4.5,13.2,13.3,4.5,24,4.5c5.2,0,10.1,2,13.8,5.7c3.7,3.7,5.7,8.6,5.7,13.8c0,10.7-8.7,19.5-19.5,19.5c-3.2,0-6.3-0.8-9.1-2.3
          L5,43.8C5,43.8,4.9,43.8,4.9,43.8z"></path>
          <path fill="#cfd8dc" d="M24,5c5.1,0,9.8,2,13.4,5.6C41,14.2,43,18.9,43,24c0,10.5-8.5,19-19,19h0c-3.2,0-6.3-0.8-9.1-2.3
          L4.9,43.3l2.7-9.8C5.9,30.6,5,27.3,5,24C5,13.5,13.5,5,24,5 M24,43L24,43L24,43 M24,43L24,43L24,43 M24,4L24,4C13,4,4,13,4,24
          c0,3.4,0.8,6.7,2.5,9.6L3.9,43c-0.1,0.3,0,0.7,0.3,1c0.2,0.2,0.4,0.3,0.7,0.3c0.1,0,0.2,0,0.3,0l9.7-2.5c2.8,1.5,6,2.2,9.2,2.2
          c11,0,20-9,20-20c0-5.3-2.1-10.4-5.8-14.1C34.4,6.1,29.4,4,24,4L24,4z"></path>
          <path fill="#40c351" d="M35.2,12.8c-3-3-6.9-4.6-11.2-4.6C15.3,8.2,8.2,15.3,8.2,24c0,3,0.8,5.9,2.4,8.4L11,33l-1.6,5.8
          l6-1.6l0.6,0.3c2.4,1.4,5.2,2.2,8,2.2h0c8.7,0,15.8-7.1,15.8-15.8C39.8,19.8,38.2,15.8,35.2,12.8z"></path>
          <path fill="#fff" fill-rule="evenodd" d="M19.3,16c-0.4-0.8-0.7-0.8-1.1-0.8c-0.3,0-0.6,0-0.9,0
          s-0.8,0.1-1.3,0.6c-0.4,0.5-1.7,1.6-1.7,4s1.7,4.6,1.9,4.9s3.3,5.3,8.1,7.2c4,1.6,4.8,1.3,5.7,1.2c0.9-0.1,2.8-1.1,3.2-2.3
          c0.4-1.1,0.4-2.1,0.3-2.3c-0.1-0.2-0.4-0.3-0.9-0.6s-2.8-1.4-3.2-1.5c-0.4-0.2-0.8-0.2-1.1,0.2c-0.3,0.5-1.2,1.5-1.5,1.9
          c-0.3,0.3-0.6,0.4-1,0.1c-0.5-0.2-2-0.7-3.8-2.4c-1.4-1.3-2.4-2.8-2.6-3.3c-0.3-0.5,0-0.7,0.2-1c0.2-0.2,0.5-0.6,0.7-0.8
          c0.2-0.3,0.3-0.5,0.5-0.8c0.2-0.3,0.1-0.6,0-0.8C20.6,19.3,19.7,17,19.3,16z" clip-rule="evenodd"></path>
        </svg>
      </a>

      <!-- Savage (TikTok) -->
      <a href="https://www.tiktok.com/@sm.fxp7.23" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 50 50">
          <path d="M41,4H9C6.243,4,4,6.243,4,9v32c0,2.757,2.243,5,5,5h32c2.757,0,5-2.243,5-5V9C46,6.243,43.757,4,41,4z
          M37.006,22.323c-0.227,0.021-0.457,0.035-0.69,0.035c-2.623,0-4.928-1.349-6.269-3.388c0,5.349,0,11.435,0,11.537
          c0,4.709-3.818,8.527-8.527,8.527s-8.527-3.818-8.527-8.527s3.818-8.527,8.527-8.527c0.178,0,0.352,0.016,0.527,0.027v4.202
          c-0.175-0.021-0.347-0.053-0.527-0.053c-2.404,0-4.352,1.948-4.352,4.352s1.948,4.352,4.352,4.352s4.527-1.894,4.527-4.298
          c0-0.095,0.042-19.594,0.042-19.594h4.016c0.378,3.591,3.277,6.425,6.901,6.685V22.323z"/>
        </svg>
      </a>
    </div>

  </div>

  <div class="section">
    <h3>Reset Key</h3>
    <input type="text" id="resetInput" placeholder="Introduce la key">
    <button onclick="resetKey()">Resetear</button>
    <div class="result" id="resetMsg"></div>
  </div>

  <button onclick="logout()">Cerrar Sesi√≥n</button>
</div>

<script>
// --- VARIABLES ---
const precios = { "1":1, "7":5, "15":12, "30":25, "365":50 };
let currentUser = null;

// ELEMENTOS
const loginBox = document.getElementById("loginBox");
const registerBox = document.getElementById("registerBox");
const panelBox = document.getElementById("panelBox");
const userLogin = document.getElementById("userLogin");
const passLogin = document.getElementById("passLogin");
const userReg = document.getElementById("userReg");
const passReg = document.getElementById("passReg");
const topbar = document.getElementById("topbar");
const resultado = document.getElementById("resultado");
const resetInput = document.getElementById("resetInput");
const resetMsg = document.getElementById("resetMsg");
const loginError = document.getElementById("loginError");
const productoSelect = document.getElementById("producto");
const tiempoSelect = document.getElementById("tiempo");

// --- VISTAS ---
function showRegister(){ loginBox.classList.remove("active"); registerBox.classList.add("active"); }
function showLogin(){ registerBox.classList.remove("active"); loginBox.classList.add("active"); }

// --- REGISTRO ---
function registerUser(){
  const u = userReg.value.trim();
  const p = passReg.value.trim();
  if(!u||!p) return alert("Completa usuario y contrase√±a");
  let users = JSON.parse(localStorage.getItem("users")||"{}");
  if(users[u]) return alert("Usuario ya existe");
  users[u] = {pass:p, saldo:0};
  localStorage.setItem("users", JSON.stringify(users));
  alert("Usuario registrado");
  showLogin();
}

// --- LOGIN ---
function loginUser(){
  const u = userLogin.value.trim();
  const p = passLogin.value.trim();
  let users = JSON.parse(localStorage.getItem("users")||"{}");
  if(users[u] && users[u].pass===p){
    currentUser = u;
    localStorage.setItem("currentUser",currentUser);
    updatePanel();
    loginBox.classList.remove("active");
    panelBox.classList.add("active");
    loginError.style.display="none";
  } else { loginError.style.display="block"; }
}

// --- PANEL ---
function updatePanel(){
  let users = JSON.parse(localStorage.getItem("users")||"{}");
  if(!currentUser || !users[currentUser]) return;
  topbar.innerText = `User: ${currentUser} | Saldo: $${users[currentUser].saldo}`;
}

// --- GENERAR KEY ---
function generarKey(){
  let users = JSON.parse(localStorage.getItem("users")||"{}");
  if(!currentUser || !users[currentUser]) return;

  let producto = productoSelect.value;
  let tiempoVal = tiempoSelect.value;
  let precio = precios[tiempoVal];

  if(users[currentUser].saldo < precio){
    resultado.innerText = "Saldo insuficiente";
    return;
  }

  users[currentUser].saldo -= precio;
  localStorage.setItem("users", JSON.stringify(users));
  updatePanel();

  let key = producto==="drip" ? "KEY-"+Math.floor(1000000000+Math.random()*9000000000)
                               : "HG-FACTRICK-"+Math.floor(10000+Math.random()*90000);
  resultado.innerText = "‚úÖ Key generada: "+key;
}

// --- RESET KEY ---
function resetKey(){
  let keyVal = resetInput.value.trim();
  resetMsg.innerText = keyVal.length>0 ? "üîÑ Key correctamente reseteada" : "‚ö†Ô∏è Ingresa una key v√°lida";
}

// --- LOGOUT ---
function logout(){
  currentUser=null;
  localStorage.removeItem("currentUser");
  panelBox.classList.remove("active");
  loginBox.classList.add("active");
}

// --- MANTENER SESI√ìN ---
window.onload = function(){
  let savedUser = localStorage.getItem("currentUser");
  if(savedUser){
    currentUser = savedUser;
    updatePanel();
    loginBox.classList.remove("active");
    panelBox.classList.add("active");
  }
};
</script>

</body>
</html>
